!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("firebase/auth"),require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/fire"),require("@angular/common")):"function"==typeof define&&define.amd?define("@angular/fire/auth",["exports","firebase/auth","@angular/core","rxjs","rxjs/operators","@angular/fire","@angular/common"],n):n(((e="undefined"!=typeof globalThis?globalThis:e||self).angular=e.angular||{},e.angular.fire=e.angular.fire||{},e.angular.fire.auth={}),null,e.ng.core,e.rxjs,e.rxjs.operators,e.angular.fire,e.ng.common)}(this,(function(e,n,t,r,i,u,a){"use strict";var o=new t.InjectionToken("angularfire2.auth.use-emulator"),s=new t.InjectionToken("angularfire2.auth.settings"),l=new t.InjectionToken("angularfire2.auth.tenant-id"),c=new t.InjectionToken("angularfire2.auth.langugage-code"),p=new t.InjectionToken("angularfire2.auth.use-device-language"),d=new t.InjectionToken("angularfire.auth.persistence"),g=function(e,n,t,o,s,l,c,p,d,g){var f=new u.ɵAngularFireSchedulers(o),h=u.ɵkeepUnstableUntilFirstFactory(f),I=new r.Subject,y=r.of(void 0).pipe(i.observeOn(f.outsideAngular),i.switchMap((function(){return o.runOutsideAngular((function(){return import("firebase/auth")}))})),i.map((function(){return u.ɵfirebaseAppFactory(e,o,n)})),i.map((function(e){return o.runOutsideAngular((function(){var n=s,t=l;return u.ɵfetchInstance(e.name+".auth","AngularFireAuth",e,(function(){var r=o.runOutsideAngular((function(){return e.auth()}));return n&&r.useEmulator("http://"+n.join(":")),c&&(r.tenantId=c),r.languageCode=p,d&&r.useDeviceLanguage(),t&&(r.settings=t),g&&r.setPersistence(g),r}),[n,c,p,d,t,g])}))})),i.shareReplay({bufferSize:1,refCount:!1}));if(a.isPlatformServer(t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=r.of(null);else{y.pipe(i.first()).subscribe();var A=y.pipe(i.switchMap((function(e){return e.getRedirectResult().then((function(e){return e}),(function(){return null}))})),h,i.shareReplay({bufferSize:1,refCount:!1})),j=function(e){return new r.Observable((function(n){return{unsubscribe:o.runOutsideAngular((function(){return e(n)}))}}))},b=y.pipe(i.switchMap((function(e){return j(e.onAuthStateChanged.bind(e))}))),m=y.pipe(i.switchMap((function(e){return j(e.onIdTokenChanged.bind(e))})));this.authState=A.pipe(i.switchMapTo(b),i.subscribeOn(f.outsideAngular),i.observeOn(f.insideAngular)),this.user=A.pipe(i.switchMapTo(m),i.subscribeOn(f.outsideAngular),i.observeOn(f.insideAngular)),this.idToken=this.user.pipe(i.switchMap((function(e){return e?r.from(e.getIdToken()):r.of(null)}))),this.idTokenResult=this.user.pipe(i.switchMap((function(e){return e?r.from(e.getIdTokenResult()):r.of(null)}))),this.credential=r.merge(A,I,this.authState.pipe(i.filter((function(e){return!e})))).pipe(i.map((function(e){return(null==e?void 0:e.user)?e:null})),i.subscribeOn(f.outsideAngular),i.observeOn(f.insideAngular))}return u.ɵlazySDKProxy(this,y,o,{spy:{apply:function(e,n,t){(e.startsWith("signIn")||e.startsWith("createUser"))&&t.then((function(e){return I.next(e)}))}}})};g.decorators=[{type:t.Injectable,args:[{providedIn:"any"}]}],g.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[u.FIREBASE_OPTIONS]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u.FIREBASE_APP_NAME]}]},{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:t.NgZone},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[o]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[s]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[l]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[c]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[d]}]}]},g.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new g(t.ɵɵinject(u.FIREBASE_OPTIONS),t.ɵɵinject(u.FIREBASE_APP_NAME,8),t.ɵɵinject(t.PLATFORM_ID),t.ɵɵinject(t.NgZone),t.ɵɵinject(o,8),t.ɵɵinject(s,8),t.ɵɵinject(l,8),t.ɵɵinject(c,8),t.ɵɵinject(p,8),t.ɵɵinject(d,8))},token:g,providedIn:"any"}),u.ɵapplyMixins(g,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);var f=function(){};f.decorators=[{type:t.NgModule,args:[{providers:[g]}]}],e.AngularFireAuth=g,e.AngularFireAuthModule=f,e.LANGUAGE_CODE=c,e.PERSISTENCE=d,e.SETTINGS=s,e.TENANT_ID=l,e.USE_DEVICE_LANGUAGE=p,e.USE_EMULATOR=o,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-fire-auth.umd.min.js.map