!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/fire"),require("firebase/storage"),require("@angular/common")):"function"==typeof define&&define.amd?define("@angular/fire/storage",["exports","rxjs","rxjs/operators","@angular/core","@angular/fire","firebase/storage","@angular/common"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).angular=e.angular||{},e.angular.fire=e.angular.fire||{},e.angular.fire.storage={}),e.rxjs,e.rxjs.operators,e.ng.core,e.angular.fire,null,e.ng.common)}(this,(function(e,t,r,n,o,a,i){"use strict";function s(e){return new t.Observable((function(t){var r=function(e){return t.next(e)};r(e.snapshot);var n=e.on("state_changed",r);return e.then((function(e){r(e),t.complete()}),(function(n){r(e.snapshot),function(e){t.error(e)}(n)})),function(){n()}})).pipe(r.debounceTime(0))}function u(e){var t=s(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:function(){return t},percentageChanges:function(){return t.pipe(r.map((function(e){return e.bytesTransferred/e.totalBytes*100})))}}}function c(e,n,o){return{getDownloadURL:function(){return t.of(void 0).pipe(r.observeOn(n.outsideAngular),r.switchMap((function(){return e.getDownloadURL()})),o)},getMetadata:function(){return t.of(void 0).pipe(r.observeOn(n.outsideAngular),r.switchMap((function(){return e.getMetadata()})),o)},delete:function(){return t.from(e.delete())},child:function(t){return c(e.child(t),n,o)},updateMetadata:function(r){return t.from(e.updateMetadata(r))},put:function(t,r){return u(e.put(t,r))},putString:function(t,r,n){return u(e.putString(t,r,n))},listAll:function(){return t.from(e.listAll())}}}var p=new n.InjectionToken("angularfire2.storageBucket"),l=new n.InjectionToken("angularfire2.storage.maxUploadRetryTime"),f=new n.InjectionToken("angularfire2.storage.maxOperationRetryTime"),d=function(){function e(e,t,r,n,a,i,s){this.schedulers=new o.ɵAngularFireSchedulers(a),this.keepUnstableUntilFirst=o.ɵkeepUnstableUntilFirstFactory(this.schedulers);var u=o.ɵfirebaseAppFactory(e,a,t);this.storage=o.ɵfetchInstance(u.name+".storage."+r,"AngularFireStorage",u,(function(){var e=a.runOutsideAngular((function(){return u.storage(r||void 0)}));return i&&e.setMaxUploadRetryTime(i),s&&e.setMaxOperationRetryTime(s),e}),[i,s])}return e.prototype.ref=function(e){return c(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst)},e.prototype.refFromURL=function(e){return c(this.storage.refFromURL(e),this.schedulers,this.keepUnstableUntilFirst)},e.prototype.upload=function(e,t,r){return c(this.storage.ref(e),this.schedulers,this.keepUnstableUntilFirst).put(t,r)},e}();d.decorators=[{type:n.Injectable,args:[{providedIn:"any"}]}],d.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[o.FIREBASE_OPTIONS]}]},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[o.FIREBASE_APP_NAME]}]},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[p]}]},{type:Object,decorators:[{type:n.Inject,args:[n.PLATFORM_ID]}]},{type:n.NgZone},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[l]}]},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[f]}]}]},d.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new d(n.ɵɵinject(o.FIREBASE_OPTIONS),n.ɵɵinject(o.FIREBASE_APP_NAME,8),n.ɵɵinject(p,8),n.ɵɵinject(n.PLATFORM_ID),n.ɵɵinject(n.NgZone),n.ɵɵinject(l,8),n.ɵɵinject(f,8))},token:d,providedIn:"any"});var g=function(){function e(e,t){this.storage=e,this.asyncPipe=new i.AsyncPipe(t)}return e.prototype.transform=function(e){return e!==this.path&&(this.path=e,this.downloadUrl$=this.storage.ref(e).getDownloadURL()),this.asyncPipe.transform(this.downloadUrl$)},e.prototype.ngOnDestroy=function(){this.asyncPipe.ngOnDestroy()},e}();g.decorators=[{type:n.Pipe,args:[{name:"getDownloadURL",pure:!1}]}],g.ctorParameters=function(){return[{type:d},{type:n.ChangeDetectorRef}]};var h=function(){};h.decorators=[{type:n.NgModule,args:[{declarations:[g],exports:[g]}]}];var y=function(){};y.decorators=[{type:n.NgModule,args:[{exports:[h],providers:[d]}]}],e.AngularFireStorage=d,e.AngularFireStorageModule=y,e.BUCKET=p,e.GetDownloadURLPipe=g,e.GetDownloadURLPipeModule=h,e.MAX_OPERATION_RETRY_TIME=f,e.MAX_UPLOAD_RETRY_TIME=l,e.createStorageRef=c,e.createUploadTask=u,e.fromTask=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-fire-storage.umd.min.js.map