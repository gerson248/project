/**
 * @fileoverview added by tsickle
 * Generated from: ref.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { createUploadTask } from './task';
import { from, of } from 'rxjs';
import { observeOn, switchMap } from 'rxjs/operators';
/**
 * @record
 */
export function AngularFireStorageReference() { }
if (false) {
    /**
     * @return {?}
     */
    AngularFireStorageReference.prototype.getDownloadURL = function () { };
    /**
     * @return {?}
     */
    AngularFireStorageReference.prototype.getMetadata = function () { };
    /**
     * @return {?}
     */
    AngularFireStorageReference.prototype.delete = function () { };
    /**
     * @param {?} path
     * @return {?}
     */
    AngularFireStorageReference.prototype.child = function (path) { };
    /**
     * @param {?} meta
     * @return {?}
     */
    AngularFireStorageReference.prototype.updateMetadata = function (meta) { };
    /**
     * @param {?} data
     * @param {?=} metadata
     * @return {?}
     */
    AngularFireStorageReference.prototype.put = function (data, metadata) { };
    /**
     * @param {?} data
     * @param {?=} format
     * @param {?=} metadata
     * @return {?}
     */
    AngularFireStorageReference.prototype.putString = function (data, format, metadata) { };
    /**
     * @return {?}
     */
    AngularFireStorageReference.prototype.listAll = function () { };
}
/**
 * Create an AngularFire wrapped Storage Reference. This object
 * creates observable methods from promise based methods.
 * @param {?} ref
 * @param {?} schedulers
 * @param {?} keepUnstableUntilFirst
 * @return {?}
 */
export function createStorageRef(ref, schedulers, keepUnstableUntilFirst) {
    return {
        getDownloadURL: (/**
         * @return {?}
         */
        () => of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap((/**
         * @return {?}
         */
        () => ref.getDownloadURL())), keepUnstableUntilFirst)),
        getMetadata: (/**
         * @return {?}
         */
        () => of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap((/**
         * @return {?}
         */
        () => ref.getMetadata())), keepUnstableUntilFirst)),
        delete: (/**
         * @return {?}
         */
        () => from(ref.delete())),
        child: (/**
         * @param {?} path
         * @return {?}
         */
        (path) => createStorageRef(ref.child(path), schedulers, keepUnstableUntilFirst)),
        updateMetadata: (/**
         * @param {?} meta
         * @return {?}
         */
        (meta) => from(ref.updateMetadata(meta))),
        put: (/**
         * @param {?} data
         * @param {?=} metadata
         * @return {?}
         */
        (data, metadata) => {
            /** @type {?} */
            const task = ref.put(data, metadata);
            return createUploadTask(task);
        }),
        putString: (/**
         * @param {?} data
         * @param {?=} format
         * @param {?=} metadata
         * @return {?}
         */
        (data, format, metadata) => {
            /** @type {?} */
            const task = ref.putString(data, format, metadata);
            return createUploadTask(task);
        }),
        listAll: (/**
         * @return {?}
         */
        () => from(ref.listAll()))
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVmLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3J1bm5lci93b3JrL2FuZ3VsYXJmaXJlL2FuZ3VsYXJmaXJlL3NyYy9zdG9yYWdlLyIsInNvdXJjZXMiOlsicmVmLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsT0FBTyxFQUF5QixnQkFBZ0IsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUNqRSxPQUFPLEVBQUUsSUFBSSxFQUFjLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUU1QyxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7O0FBRXRELGlEQVNDOzs7OztJQVJDLHVFQUFrQzs7OztJQUNsQyxvRUFBK0I7Ozs7SUFDL0IsK0RBQTBCOzs7OztJQUMxQixrRUFBeUI7Ozs7O0lBQ3pCLDJFQUF3RDs7Ozs7O0lBQ3hELDBFQUE2RTs7Ozs7OztJQUM3RSx3RkFBbUg7Ozs7SUFDbkgsZ0VBQWtDOzs7Ozs7Ozs7O0FBT3BDLE1BQU0sVUFBVSxnQkFBZ0IsQ0FDOUIsR0FBYyxFQUNkLFVBQWtDLEVBQ2xDLHNCQUFpRTtJQUVqRSxPQUFPO1FBQ0wsY0FBYzs7O1FBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FDdEMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsRUFDcEMsU0FBUzs7O1FBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxFQUFDLEVBQ3JDLHNCQUFzQixDQUN2QixDQUFBO1FBQ0QsV0FBVzs7O1FBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FDbkMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsRUFDcEMsU0FBUzs7O1FBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxFQUFDLEVBQ2xDLHNCQUFzQixDQUN2QixDQUFBO1FBQ0QsTUFBTTs7O1FBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1FBQ2hDLEtBQUs7Ozs7UUFBRSxDQUFDLElBQVksRUFBRSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxVQUFVLEVBQUUsc0JBQXNCLENBQUMsQ0FBQTtRQUM5RixjQUFjOzs7O1FBQUUsQ0FBQyxJQUFzQixFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFBO1FBQzFFLEdBQUc7Ozs7O1FBQUUsQ0FBQyxJQUFTLEVBQUUsUUFBeUIsRUFBRSxFQUFFOztrQkFDdEMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQztZQUNwQyxPQUFPLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLENBQUMsQ0FBQTtRQUNELFNBQVM7Ozs7OztRQUFFLENBQUMsSUFBWSxFQUFFLE1BQXFCLEVBQUUsUUFBeUIsRUFBRSxFQUFFOztrQkFDdEUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxRQUFRLENBQUM7WUFDbEQsT0FBTyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoQyxDQUFDLENBQUE7UUFDRCxPQUFPOzs7UUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUE7S0FDbkMsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBMaXN0UmVzdWx0LCBSZWZlcmVuY2UsIFNldHRhYmxlTWV0YWRhdGEsIFN0cmluZ0Zvcm1hdCwgVXBsb2FkTWV0YWRhdGEgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgQW5ndWxhckZpcmVVcGxvYWRUYXNrLCBjcmVhdGVVcGxvYWRUYXNrIH0gZnJvbSAnLi90YXNrJztcbmltcG9ydCB7IGZyb20sIE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyDJtUFuZ3VsYXJGaXJlU2NoZWR1bGVycyB9IGZyb20gJ0Bhbmd1bGFyL2ZpcmUnO1xuaW1wb3J0IHsgb2JzZXJ2ZU9uLCBzd2l0Y2hNYXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5ndWxhckZpcmVTdG9yYWdlUmVmZXJlbmNlIHtcbiAgZ2V0RG93bmxvYWRVUkwoKTogT2JzZXJ2YWJsZTxhbnk+O1xuICBnZXRNZXRhZGF0YSgpOiBPYnNlcnZhYmxlPGFueT47XG4gIGRlbGV0ZSgpOiBPYnNlcnZhYmxlPGFueT47XG4gIGNoaWxkKHBhdGg6IHN0cmluZyk6IGFueTtcbiAgdXBkYXRlTWV0YWRhdGEobWV0YTogU2V0dGFibGVNZXRhZGF0YSk6IE9ic2VydmFibGU8YW55PjtcbiAgcHV0KGRhdGE6IGFueSwgbWV0YWRhdGE/OiBVcGxvYWRNZXRhZGF0YSB8IHVuZGVmaW5lZCk6IEFuZ3VsYXJGaXJlVXBsb2FkVGFzaztcbiAgcHV0U3RyaW5nKGRhdGE6IHN0cmluZywgZm9ybWF0Pzogc3RyaW5nIHwgdW5kZWZpbmVkLCBtZXRhZGF0YT86IFVwbG9hZE1ldGFkYXRhIHwgdW5kZWZpbmVkKTogQW5ndWxhckZpcmVVcGxvYWRUYXNrO1xuICBsaXN0QWxsKCk6IE9ic2VydmFibGU8TGlzdFJlc3VsdD47XG59XG5cbi8qKlxuICogQ3JlYXRlIGFuIEFuZ3VsYXJGaXJlIHdyYXBwZWQgU3RvcmFnZSBSZWZlcmVuY2UuIFRoaXMgb2JqZWN0XG4gKiBjcmVhdGVzIG9ic2VydmFibGUgbWV0aG9kcyBmcm9tIHByb21pc2UgYmFzZWQgbWV0aG9kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0b3JhZ2VSZWYoXG4gIHJlZjogUmVmZXJlbmNlLFxuICBzY2hlZHVsZXJzOiDJtUFuZ3VsYXJGaXJlU2NoZWR1bGVycyxcbiAga2VlcFVuc3RhYmxlVW50aWxGaXJzdDogPFQ+KG9icyQ6IE9ic2VydmFibGU8VD4pID0+IE9ic2VydmFibGU8VD5cbik6IEFuZ3VsYXJGaXJlU3RvcmFnZVJlZmVyZW5jZSB7XG4gIHJldHVybiB7XG4gICAgZ2V0RG93bmxvYWRVUkw6ICgpID0+IG9mKHVuZGVmaW5lZCkucGlwZShcbiAgICAgIG9ic2VydmVPbihzY2hlZHVsZXJzLm91dHNpZGVBbmd1bGFyKSxcbiAgICAgIHN3aXRjaE1hcCgoKSA9PiByZWYuZ2V0RG93bmxvYWRVUkwoKSksXG4gICAgICBrZWVwVW5zdGFibGVVbnRpbEZpcnN0XG4gICAgKSxcbiAgICBnZXRNZXRhZGF0YTogKCkgPT4gb2YodW5kZWZpbmVkKS5waXBlKFxuICAgICAgb2JzZXJ2ZU9uKHNjaGVkdWxlcnMub3V0c2lkZUFuZ3VsYXIpLFxuICAgICAgc3dpdGNoTWFwKCgpID0+IHJlZi5nZXRNZXRhZGF0YSgpKSxcbiAgICAgIGtlZXBVbnN0YWJsZVVudGlsRmlyc3RcbiAgICApLFxuICAgIGRlbGV0ZTogKCkgPT4gZnJvbShyZWYuZGVsZXRlKCkpLFxuICAgIGNoaWxkOiAocGF0aDogc3RyaW5nKSA9PiBjcmVhdGVTdG9yYWdlUmVmKHJlZi5jaGlsZChwYXRoKSwgc2NoZWR1bGVycywga2VlcFVuc3RhYmxlVW50aWxGaXJzdCksXG4gICAgdXBkYXRlTWV0YWRhdGE6IChtZXRhOiBTZXR0YWJsZU1ldGFkYXRhKSA9PiBmcm9tKHJlZi51cGRhdGVNZXRhZGF0YShtZXRhKSksXG4gICAgcHV0OiAoZGF0YTogYW55LCBtZXRhZGF0YT86IFVwbG9hZE1ldGFkYXRhKSA9PiB7XG4gICAgICBjb25zdCB0YXNrID0gcmVmLnB1dChkYXRhLCBtZXRhZGF0YSk7XG4gICAgICByZXR1cm4gY3JlYXRlVXBsb2FkVGFzayh0YXNrKTtcbiAgICB9LFxuICAgIHB1dFN0cmluZzogKGRhdGE6IHN0cmluZywgZm9ybWF0PzogU3RyaW5nRm9ybWF0LCBtZXRhZGF0YT86IFVwbG9hZE1ldGFkYXRhKSA9PiB7XG4gICAgICBjb25zdCB0YXNrID0gcmVmLnB1dFN0cmluZyhkYXRhLCBmb3JtYXQsIG1ldGFkYXRhKTtcbiAgICAgIHJldHVybiBjcmVhdGVVcGxvYWRUYXNrKHRhc2spO1xuICAgIH0sXG4gICAgbGlzdEFsbDogKCkgPT4gZnJvbShyZWYubGlzdEFsbCgpKVxuICB9O1xufVxuIl19